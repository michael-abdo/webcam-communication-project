<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - BehaviorIQ Pro</title>
    <style>
        /* Reuse Design System Variables */
        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --primary-light: #dbeafe;
            --secondary-color: #7c3aed;
            --secondary-hover: #6d28d9;
            --secondary-light: #ede9fe;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --bg-primary: #ffffff;
            --bg-secondary: var(--gray-50);
            --bg-dark: var(--gray-900);
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            --text-4xl: 2.25rem;
            --font-normal: 400;
            --font-medium: 500;
            --font-semibold: 600;
            --font-bold: 700;
            --spacing-1: 0.25rem;
            --spacing-2: 0.5rem;
            --spacing-3: 0.75rem;
            --spacing-4: 1rem;
            --spacing-5: 1.25rem;
            --spacing-6: 1.5rem;
            --spacing-8: 2rem;
            --spacing-10: 2.5rem;
            --spacing-12: 3rem;
            --spacing-16: 4rem;
            --radius-sm: 0.25rem;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-xl: 0.75rem;
            --radius-2xl: 1rem;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            background-color: var(--bg-secondary);
            color: var(--gray-800);
            line-height: 1.6;
        }

        /* Navigation Styles (reused) */
        .main-nav {
            background: var(--bg-primary);
            border-bottom: 1px solid var(--gray-200);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: var(--spacing-4) var(--spacing-6);
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow-sm);
        }

        .nav-brand {
            font-size: var(--text-xl);
            font-weight: var(--font-bold);
            color: var(--primary-color);
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: var(--spacing-8);
        }

        .nav-link {
            text-decoration: none;
            color: var(--gray-600);
            font-weight: var(--font-medium);
            padding: var(--spacing-2) var(--spacing-4);
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
        }

        .nav-link:hover {
            color: var(--primary-color);
            background-color: var(--primary-light);
        }

        .nav-link.active {
            color: var(--primary-color);
            background-color: var(--primary-light);
        }

        .nav-actions {
            display: flex;
            gap: var(--spacing-3);
        }

        .btn {
            padding: var(--spacing-2) var(--spacing-4);
            border: none;
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-2);
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-hover);
        }

        .btn-secondary {
            background-color: var(--gray-100);
            color: var(--gray-700);
        }

        .btn-secondary:hover {
            background-color: var(--gray-200);
        }

        .btn-sm {
            padding: var(--spacing-1) var(--spacing-3);
            font-size: var(--text-xs);
        }

        .btn-danger {
            background-color: var(--accent-red);
            color: white;
        }

        .btn-danger:hover {
            background-color: #dc2626;
        }

        /* Main Content */
        .main-content {
            margin-top: 80px;
            padding: var(--spacing-8) var(--spacing-6);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .page-header {
            margin-bottom: var(--spacing-8);
        }

        .page-title {
            font-size: var(--text-3xl);
            font-weight: var(--font-bold);
            color: var(--gray-900);
            margin-bottom: var(--spacing-2);
        }

        .page-subtitle {
            color: var(--gray-600);
            font-size: var(--text-lg);
        }

        /* Settings Layout */
        .settings-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: var(--spacing-8);
        }

        .settings-sidebar {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-6);
            box-shadow: var(--shadow-md);
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        .settings-nav {
            list-style: none;
        }

        .settings-nav-item {
            margin-bottom: var(--spacing-2);
        }

        .settings-nav-link {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            padding: var(--spacing-3) var(--spacing-4);
            text-decoration: none;
            color: var(--gray-600);
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
        }

        .settings-nav-link:hover {
            background: var(--gray-50);
            color: var(--gray-800);
        }

        .settings-nav-link.active {
            background: var(--primary-light);
            color: var(--primary-color);
        }

        .settings-nav-icon {
            font-size: var(--text-base);
        }

        /* Settings Content */
        .settings-content {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-6);
        }

        .settings-section {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-6);
            box-shadow: var(--shadow-md);
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-6);
            padding-bottom: var(--spacing-4);
            border-bottom: 1px solid var(--gray-200);
        }

        .section-title {
            font-size: var(--text-xl);
            font-weight: var(--font-semibold);
            color: var(--gray-900);
        }

        .section-description {
            font-size: var(--text-sm);
            color: var(--gray-600);
            margin-top: var(--spacing-1);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: var(--spacing-6);
        }

        .form-label {
            display: block;
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--gray-700);
            margin-bottom: var(--spacing-2);
        }

        .form-input {
            width: 100%;
            padding: var(--spacing-3) var(--spacing-4);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            transition: border-color 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgb(37 99 235 / 0.1);
        }

        .form-select {
            width: 100%;
            padding: var(--spacing-3) var(--spacing-4);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            background: white;
            cursor: pointer;
        }

        .form-textarea {
            width: 100%;
            padding: var(--spacing-3) var(--spacing-4);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            resize: vertical;
            min-height: 100px;
        }

        .form-help {
            font-size: var(--text-xs);
            color: var(--gray-500);
            margin-top: var(--spacing-1);
        }

        /* Switch/Toggle Styles */
        .form-switch {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            margin-bottom: var(--spacing-4);
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-300);
            transition: 0.2s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.2s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:checked + .slider:before {
            transform: translateX(24px);
        }

        .switch-label {
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--gray-700);
        }

        .switch-description {
            font-size: var(--text-xs);
            color: var(--gray-500);
        }

        /* AI Model Configuration */
        .model-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-4);
            margin-top: var(--spacing-4);
        }

        .model-card {
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: var(--spacing-4);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .model-card:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow-md);
        }

        .model-card.selected {
            border-color: var(--primary-color);
            background: var(--primary-light);
        }

        .model-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            margin-bottom: var(--spacing-2);
        }

        .model-icon {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-md);
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-sm);
        }

        .model-name {
            font-size: var(--text-base);
            font-weight: var(--font-semibold);
            color: var(--gray-900);
        }

        .model-status {
            margin-left: auto;
            padding: var(--spacing-1) var(--spacing-2);
            border-radius: var(--radius-sm);
            font-size: var(--text-xs);
            font-weight: var(--font-medium);
        }

        .status-active {
            background: #dcfce7;
            color: #166534;
        }

        .status-inactive {
            background: var(--gray-100);
            color: var(--gray-600);
        }

        .model-description {
            font-size: var(--text-sm);
            color: var(--gray-600);
            line-height: 1.4;
        }

        /* Integration Cards */
        .integration-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-4);
            margin-top: var(--spacing-4);
        }

        .integration-card {
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: var(--spacing-4);
            text-align: center;
            transition: all 0.2s ease;
        }

        .integration-card:hover {
            box-shadow: var(--shadow-md);
            border-color: var(--primary-color);
        }

        .integration-logo {
            width: 48px;
            height: 48px;
            margin: 0 auto var(--spacing-3);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-xl);
            background: var(--gray-100);
        }

        .integration-name {
            font-size: var(--text-base);
            font-weight: var(--font-semibold);
            color: var(--gray-900);
            margin-bottom: var(--spacing-2);
        }

        .integration-status {
            font-size: var(--text-sm);
            margin-bottom: var(--spacing-3);
        }

        .connected {
            color: var(--accent-green);
        }

        .disconnected {
            color: var(--gray-500);
        }

        /* Save/Action Bar */
        .action-bar {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-4) var(--spacing-6);
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: var(--spacing-6);
            position: sticky;
            bottom: var(--spacing-4);
        }

        .unsaved-changes {
            font-size: var(--text-sm);
            color: var(--accent-orange);
            font-weight: var(--font-medium);
        }

        .action-buttons {
            display: flex;
            gap: var(--spacing-3);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .settings-layout {
                grid-template-columns: 1fr;
            }
            
            .settings-sidebar {
                position: static;
                order: 2;
            }
            
            .settings-content {
                order: 1;
            }
        }

        @media (max-width: 768px) {
            .model-grid {
                grid-template-columns: 1fr;
            }
            
            .integration-grid {
                grid-template-columns: 1fr;
            }
            
            .action-bar {
                flex-direction: column;
                gap: var(--spacing-3);
                align-items: stretch;
            }
            
            .action-buttons {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-brand">
            <span class="logo">🧠 BehaviorIQ Pro</span>
        </div>
        <ul class="nav-menu">
            <li><a href="index.html" class="nav-link">Dashboard</a></li>
            <li><a href="analysis.html" class="nav-link">Live Analysis</a></li>
            <li><a href="reports.html" class="nav-link">Reports</a></li>
            <li><a href="settings.html" class="nav-link active">Settings</a></li>
        </ul>
        <div class="nav-actions">
            <button class="btn btn-primary" onclick="saveAllSettings()">💾 Save Changes</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="page-title">Settings & Configuration</h1>
                <p class="page-subtitle">Configure AI models, integrations, and system preferences</p>
            </div>

            <!-- Settings Layout -->
            <div class="settings-layout">
                <!-- Sidebar Navigation -->
                <div class="settings-sidebar">
                    <ul class="settings-nav">
                        <li class="settings-nav-item">
                            <a href="#general" class="settings-nav-link active" onclick="showSection('general')">
                                <span class="settings-nav-icon">⚙️</span>
                                General
                            </a>
                        </li>
                        <li class="settings-nav-item">
                            <a href="#ai-models" class="settings-nav-link" onclick="showSection('ai-models')">
                                <span class="settings-nav-icon">🤖</span>
                                AI Models
                            </a>
                        </li>
                        <li class="settings-nav-item">
                            <a href="#integrations" class="settings-nav-link" onclick="showSection('integrations')">
                                <span class="settings-nav-icon">🔗</span>
                                Integrations
                            </a>
                        </li>
                        <li class="settings-nav-item">
                            <a href="#notifications" class="settings-nav-link" onclick="showSection('notifications')">
                                <span class="settings-nav-icon">🔔</span>
                                Notifications
                            </a>
                        </li>
                        <li class="settings-nav-item">
                            <a href="#privacy" class="settings-nav-link" onclick="showSection('privacy')">
                                <span class="settings-nav-icon">🔒</span>
                                Privacy & Security
                            </a>
                        </li>
                        <li class="settings-nav-item">
                            <a href="#advanced" class="settings-nav-link" onclick="showSection('advanced')">
                                <span class="settings-nav-icon">🔧</span>
                                Advanced
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Settings Content -->
                <div class="settings-content">
                    <!-- General Settings -->
                    <div id="general-section" class="settings-section">
                        <div class="section-header">
                            <div>
                                <h2 class="section-title">General Settings</h2>
                                <p class="section-description">Configure basic application preferences and defaults</p>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="organization-name">Organization Name</label>
                            <input type="text" id="organization-name" class="form-input" value="Acme Corp" onchange="markUnsaved()">
                            <p class="form-help">This name will appear in reports and exports</p>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="timezone">Timezone</label>
                            <select id="timezone" class="form-select" onchange="markUnsaved()">
                                <option value="UTC-8">Pacific Time (UTC-8)</option>
                                <option value="UTC-5" selected>Eastern Time (UTC-5)</option>
                                <option value="UTC+0">UTC</option>
                                <option value="UTC+1">Central European Time (UTC+1)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="default-session-length">Default Session Length (minutes)</label>
                            <input type="number" id="default-session-length" class="form-input" value="60" min="15" max="480" onchange="markUnsaved()">
                            <p class="form-help">Default duration for new meeting sessions</p>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" checked onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Auto-start recording</div>
                                <div class="switch-description">Automatically begin recording when sessions start</div>
                            </div>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" checked onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Enable real-time alerts</div>
                                <div class="switch-description">Show live notifications during meetings</div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Models Section -->
                    <div id="ai-models-section" class="settings-section" style="display: none;">
                        <div class="section-header">
                            <div>
                                <h2 class="section-title">AI Model Configuration</h2>
                                <p class="section-description">Select and configure AI models for different analysis types</p>
                            </div>
                            <button class="btn btn-secondary" onclick="testModels()">🧪 Test Models</button>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Emotion Recognition Model</label>
                            <div class="model-grid">
                                <div class="model-card selected" onclick="selectModel(this, 'emotion')">
                                    <div class="model-header">
                                        <div class="model-icon">🎭</div>
                                        <div class="model-name">DeepFace Advanced</div>
                                        <span class="model-status status-active">Active</span>
                                    </div>
                                    <p class="model-description">High-accuracy emotion detection with real-time processing. Supports 7 basic emotions plus engagement scoring.</p>
                                </div>
                                
                                <div class="model-card" onclick="selectModel(this, 'emotion')">
                                    <div class="model-header">
                                        <div class="model-icon">😊</div>
                                        <div class="model-name">OpenCV Emotion</div>
                                        <span class="model-status status-inactive">Available</span>
                                    </div>
                                    <p class="model-description">Lightweight emotion recognition suitable for lower-end hardware. Basic emotion detection capabilities.</p>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Speech Analysis Model</label>
                            <div class="model-grid">
                                <div class="model-card selected" onclick="selectModel(this, 'speech')">
                                    <div class="model-header">
                                        <div class="model-icon">🎤</div>
                                        <div class="model-name">Whisper + Sentiment</div>
                                        <span class="model-status status-active">Active</span>
                                    </div>
                                    <p class="model-description">Advanced speech-to-text with real-time sentiment analysis. Supports multiple languages and tone detection.</p>
                                </div>
                                
                                <div class="model-card" onclick="selectModel(this, 'speech')">
                                    <div class="model-header">
                                        <div class="model-icon">🗣️</div>
                                        <div class="model-name">Google Speech API</div>
                                        <span class="model-status status-inactive">Available</span>
                                    </div>
                                    <p class="model-description">Cloud-based speech recognition with high accuracy. Requires internet connection.</p>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="confidence-threshold">Confidence Threshold</label>
                            <input type="range" id="confidence-threshold" min="0.5" max="0.95" step="0.05" value="0.8" onchange="updateThreshold(this.value); markUnsaved()">
                            <p class="form-help">Minimum confidence score: <span id="threshold-value">80%</span></p>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" checked onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Enable GPU acceleration</div>
                                <div class="switch-description">Use GPU for faster AI model processing (requires compatible hardware)</div>
                            </div>
                        </div>
                    </div>

                    <!-- Integrations Section -->
                    <div id="integrations-section" class="settings-section" style="display: none;">
                        <div class="section-header">
                            <div>
                                <h2 class="section-title">Platform Integrations</h2>
                                <p class="section-description">Connect with video conferencing platforms and collaboration tools</p>
                            </div>
                            <button class="btn btn-secondary" onclick="scanIntegrations()">🔍 Scan for Apps</button>
                        </div>

                        <div class="integration-grid">
                            <div class="integration-card">
                                <div class="integration-logo" style="background: #2d8cff; color: white;">Z</div>
                                <div class="integration-name">Zoom</div>
                                <div class="integration-status connected">✓ Connected</div>
                                <button class="btn btn-sm btn-secondary" onclick="configureIntegration('zoom')">Configure</button>
                            </div>

                            <div class="integration-card">
                                <div class="integration-logo" style="background: #5b48d9; color: white;">T</div>
                                <div class="integration-name">Microsoft Teams</div>
                                <div class="integration-status connected">✓ Connected</div>
                                <button class="btn btn-sm btn-secondary" onclick="configureIntegration('teams')">Configure</button>
                            </div>

                            <div class="integration-card">
                                <div class="integration-logo" style="background: #4285f4; color: white;">M</div>
                                <div class="integration-name">Google Meet</div>
                                <div class="integration-status disconnected">Not connected</div>
                                <button class="btn btn-sm btn-primary" onclick="connectIntegration('meet')">Connect</button>
                            </div>

                            <div class="integration-card">
                                <div class="integration-logo" style="background: #ff6900; color: white;">W</div>
                                <div class="integration-name">WebEx</div>
                                <div class="integration-status disconnected">Not connected</div>
                                <button class="btn btn-sm btn-primary" onclick="connectIntegration('webex')">Connect</button>
                            </div>

                            <div class="integration-card">
                                <div class="integration-logo" style="background: #0078d4; color: white;">S</div>
                                <div class="integration-name">Slack</div>
                                <div class="integration-status connected">✓ Connected</div>
                                <button class="btn btn-sm btn-secondary" onclick="configureIntegration('slack')">Configure</button>
                            </div>

                            <div class="integration-card">
                                <div class="integration-logo" style="background: #4a154b; color: white;">D</div>
                                <div class="integration-name">Discord</div>
                                <div class="integration-status disconnected">Not connected</div>
                                <button class="btn btn-sm btn-primary" onclick="connectIntegration('discord')">Connect</button>
                            </div>
                        </div>

                        <div class="form-group" style="margin-top: var(--spacing-6);">
                            <label class="form-label" for="webhook-url">Webhook URL</label>
                            <input type="url" id="webhook-url" class="form-input" placeholder="https://your-server.com/webhook" onchange="markUnsaved()">
                            <p class="form-help">Send real-time analysis data to your custom endpoint</p>
                        </div>
                    </div>

                    <!-- Notifications Section -->
                    <div id="notifications-section" class="settings-section" style="display: none;">
                        <div class="section-header">
                            <div>
                                <h2 class="section-title">Notification Preferences</h2>
                                <p class="section-description">Configure when and how you receive alerts and updates</p>
                            </div>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" checked onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Session start/end notifications</div>
                                <div class="switch-description">Get notified when recording sessions begin or end</div>
                            </div>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" checked onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Low engagement alerts</div>
                                <div class="switch-description">Alert when participant engagement drops below threshold</div>
                            </div>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Speaking imbalance warnings</div>
                                <div class="switch-description">Notify when some participants dominate conversation</div>
                            </div>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" checked onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Weekly summary reports</div>
                                <div class="switch-description">Receive email summaries of meeting analytics</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="email-notifications">Email Address</label>
                            <input type="email" id="email-notifications" class="form-input" value="admin@acmecorp.com" onchange="markUnsaved()">
                            <p class="form-help">Where to send notification emails</p>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="alert-frequency">Alert Frequency</label>
                            <select id="alert-frequency" class="form-select" onchange="markUnsaved()">
                                <option value="immediate">Immediate</option>
                                <option value="every-5min" selected>Every 5 minutes</option>
                                <option value="every-15min">Every 15 minutes</option>
                                <option value="end-of-session">End of session only</option>
                            </select>
                        </div>
                    </div>

                    <!-- Privacy & Security Section -->
                    <div id="privacy-section" class="settings-section" style="display: none;">
                        <div class="section-header">
                            <div>
                                <h2 class="section-title">Privacy & Security</h2>
                                <p class="section-description">Control data retention, encryption, and access permissions</p>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="data-retention">Data Retention Period</label>
                            <select id="data-retention" class="form-select" onchange="markUnsaved()">
                                <option value="30">30 days</option>
                                <option value="90" selected>90 days</option>
                                <option value="180">6 months</option>
                                <option value="365">1 year</option>
                                <option value="unlimited">Unlimited</option>
                            </select>
                            <p class="form-help">How long to keep session recordings and analytics data</p>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" checked onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Encrypt stored data</div>
                                <div class="switch-description">Apply AES-256 encryption to all stored recordings and analytics</div>
                            </div>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" checked onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Anonymize participant data</div>
                                <div class="switch-description">Remove personally identifiable information from exported data</div>
                            </div>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Require consent notifications</div>
                                <div class="switch-description">Display recording consent dialog to all participants</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="access-logs">Access Log Retention</label>
                            <select id="access-logs" class="form-select" onchange="markUnsaved()">
                                <option value="30">30 days</option>
                                <option value="90" selected>90 days</option>
                                <option value="365">1 year</option>
                            </select>
                            <p class="form-help">How long to keep user access and system logs</p>
                        </div>
                    </div>

                    <!-- Advanced Section -->
                    <div id="advanced-section" class="settings-section" style="display: none;">
                        <div class="section-header">
                            <div>
                                <h2 class="section-title">Advanced Configuration</h2>
                                <p class="section-description">Advanced settings for power users and system administrators</p>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="api-endpoint">API Endpoint</label>
                            <input type="url" id="api-endpoint" class="form-input" value="https://api.behavioriq.com/v1" onchange="markUnsaved()">
                            <p class="form-help">Custom API endpoint for enterprise deployments</p>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="max-concurrent">Max Concurrent Sessions</label>
                            <input type="number" id="max-concurrent" class="form-input" value="5" min="1" max="50" onchange="markUnsaved()">
                            <p class="form-help">Maximum number of simultaneous analysis sessions</p>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="cpu-threads">CPU Threads for Processing</label>
                            <input type="number" id="cpu-threads" class="form-input" value="4" min="1" max="16" onchange="markUnsaved()">
                            <p class="form-help">Number of CPU threads to use for AI processing</p>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Enable debug logging</div>
                                <div class="switch-description">Generate detailed logs for troubleshooting (may impact performance)</div>
                            </div>
                        </div>

                        <div class="form-switch">
                            <label class="switch">
                                <input type="checkbox" checked onchange="markUnsaved()">
                                <span class="slider"></span>
                            </label>
                            <div>
                                <div class="switch-label">Auto-update models</div>
                                <div class="switch-description">Automatically download and install AI model updates</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="custom-script">Custom Processing Script</label>
                            <textarea id="custom-script" class="form-textarea" placeholder="// Custom JavaScript for post-processing analytics data" onchange="markUnsaved()"></textarea>
                            <p class="form-help">Advanced users can add custom processing logic</p>
                        </div>

                        <div style="margin-top: var(--spacing-6); padding-top: var(--spacing-6); border-top: 1px solid var(--gray-200);">
                            <button class="btn btn-danger" onclick="resetToDefaults()">🔄 Reset to Defaults</button>
                            <button class="btn btn-secondary" onclick="exportSettings()" style="margin-left: var(--spacing-3);">📤 Export Settings</button>
                            <button class="btn btn-secondary" onclick="importSettings()" style="margin-left: var(--spacing-3);">📥 Import Settings</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Bar -->
            <div class="action-bar" id="actionBar" style="display: none;">
                <div class="unsaved-changes">⚠️ You have unsaved changes</div>
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="discardChanges()">Discard</button>
                    <button class="btn btn-primary" onclick="saveAllSettings()">💾 Save Changes</button>
                </div>
            </div>
        </div>
    </main>

    <script>
        let hasUnsavedChanges = false;

        // Navigation functions
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.settings-section');
            sections.forEach(section => section.style.display = 'none');
            
            // Show selected section
            document.getElementById(sectionId + '-section').style.display = 'block';
            
            // Update navigation
            const navLinks = document.querySelectorAll('.settings-nav-link');
            navLinks.forEach(link => link.classList.remove('active'));
            event.target.classList.add('active');
        }

        function markUnsaved() {
            hasUnsavedChanges = true;
            document.getElementById('actionBar').style.display = 'flex';
        }

        function saveAllSettings() {
            // Simulate saving
            setTimeout(() => {
                hasUnsavedChanges = false;
                document.getElementById('actionBar').style.display = 'none';
                alert('✅ Settings saved successfully!\n\nAll configuration changes have been applied.');
            }, 500);
        }

        function discardChanges() {
            if (confirm('Are you sure you want to discard all unsaved changes?')) {
                hasUnsavedChanges = false;
                document.getElementById('actionBar').style.display = 'none';
                location.reload(); // Reload to reset form values
            }
        }

        // AI Model functions
        function selectModel(card, type) {
            // Remove selection from other cards of the same type
            const cards = card.parentElement.querySelectorAll('.model-card');
            cards.forEach(c => c.classList.remove('selected'));
            
            // Add selection to clicked card
            card.classList.add('selected');
            markUnsaved();
        }

        function updateThreshold(value) {
            document.getElementById('threshold-value').textContent = Math.round(value * 100) + '%';
        }

        function testModels() {
            alert('🧪 Testing AI Models...\n\nRunning diagnostics on:\n• Emotion recognition accuracy\n• Speech processing speed\n• Memory usage\n• GPU compatibility\n\nEstimated time: 2 minutes');
        }

        // Integration functions
        function connectIntegration(platform) {
            alert(`🔗 Connecting to ${platform}...\n\nThis will open a new window for authentication.\nPlease authorize BehaviorIQ Pro to access your ${platform} account.`);
            markUnsaved();
        }

        function configureIntegration(platform) {
            alert(`⚙️ Configuring ${platform} Integration\n\nSettings include:\n• Meeting detection preferences\n• Recording permissions\n• Data sharing options\n• Notification preferences`);
        }

        function scanIntegrations() {
            alert('🔍 Scanning for installed applications...\n\nFound:\n• Zoom Desktop App\n• Microsoft Teams\n• Chrome (Google Meet)\n• Slack Desktop\n\nWould you like to set up automatic detection for future meetings?');
        }

        // Advanced functions
        function resetToDefaults() {
            if (confirm('⚠️ Reset All Settings?\n\nThis will restore all configuration to factory defaults. This action cannot be undone.\n\nAre you sure you want to continue?')) {
                alert('🔄 Settings reset to defaults.\n\nAll custom configurations have been cleared. The system will restart to apply changes.');
            }
        }

        function exportSettings() {
            alert('📤 Exporting Settings...\n\nCreating configuration backup:\n• settings-backup-' + new Date().toISOString().slice(0,10) + '.json\n\nThis file can be used to restore your current configuration.');
        }

        function importSettings() {
            alert('📥 Import Settings\n\nPlease select a settings backup file (JSON format) to restore your configuration.\n\nNote: This will overwrite current settings.');
        }

        // Add button click effects
        document.querySelectorAll('.btn').forEach(button => {
            button.addEventListener('click', function() {
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 100);
            });
        });

        // Warn about unsaved changes when leaving
        window.addEventListener('beforeunload', function(e) {
            if (hasUnsavedChanges) {
                e.preventDefault();
                e.returnValue = '';
            }
        });

        // Initialize threshold display
        updateThreshold(0.8);
    </script>
</body>
</html>